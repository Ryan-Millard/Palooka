<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Setup | Palooka</title>
		<link rel="stylesheet" href="styles/index.css">
		<link rel="stylesheet" href="styles/setup.css">
	</head>
	<body>
		<header>
			<div class="header-container">
				<img src="img/star.svg" alt="Palooka Logo">
				<h1>Palooka</h1>
			</div>
		</header>

		<main role="main">
			<!-- Welcome Block -->
			<section class="block">
				<h2>Welcome New Recruit!</h2>
				<p>
				Congratulations on the activation of our Palooka, comrade! To get started, let's walk through the initial setup and customization process.
				Follow the steps below to ensure a smooth and successful configuration.
				</p>

				<details class="clickable">
					<summary>Palooka Setup Guide</summary>
					<ol>
						<li>
							Start by verifying that our Palooka is properly powered.
							If it isn't already on, <u>turn on our switch underneath the Palooka</u>.
						</li>
						<li>
							Ensure we are connected to the Palooka by accessing the Wi-Fi connection panel on our device.
						</li>
						<li>
							Access the configuration panel to rename our Palooka and set a secure password.
							<a data-color="white" href="#setup-protocols">Click here to get started, comrade!</a>
						</li>
						<li>
							Adjust the controller settings to our preferred operational style.
							<a data-color="white" href="/controller">Click here, comrade!</a>
						</li>
						<li>
							Once all steps are complete, our Palooka is ready for world domination, comrade.
						</li>
					</ol>
				</details>

				<p class="emphasis">
				"Comrades, build with pride! Let every robot we create honor those before usâ€”our power is in unity, our future in progress." - Marcs Machine
				</p>
			</section>

			<!-- Setup Protocols Block -->
			<section id="setup-protocols" class="block">
				<h2>Setup Protocols</h2>
				<div class="emphasis">
					<img class="small-flag" src="img/star.svg" alt="Setup Protocol Icon">
					"Precision in installation breeds excellence in operation!" - Sovietron mk7
				</div>
				<p>
				Activate synchronization protocol by following these optimized parameters. Ensure all configurations are aligned with the necessary specifications for flawless integration.
				</p>
				<ol>
					<li>Access our configuration panel to rename our Palooka and set its password.</li>
				</ol>

				<details class="clickable">
					<summary>Intialize Secure Synchronization</summary>
					<details class="passwordRequirements">
						<summary class="clickable">Password Requirements</summary>
						<ol>
							<li>8 characters</li>
							<li>1 uppercase letter</li>
							<li>1 lowercase letter</li>
							<li>1 number</li>
							<li>1 special character</li>
						</ol>
					</details>

					<form id="setup-form" class="centered-children">
						<div id="form-message"></div>
						<button id="restartButton" type="button" onclick="requestRestart()">Restart Palooka</button>
						<p>
						<label for="name">Device Name:</label>
						<input type="text" class="textInput" id="name" name="name" placeholder="Marcs-Machine" required>
						</p>
						<p>
						<label for="password">Password:</label>
						<input type="password" class="textInput" id="password" name="password" placeholder="Unity=Strength*100" required>
						</p>
						<button class="formSubmitButton" type="submit">Submit</button>
					</form>
				</details>
			</section>

			<!-- Battery Calibration Block -->
			<section class="block">
				<h2>Battery Calibration</h2>
				<p>
				Calibrate our Palooka's battery to ensure optimal battery parametrics.
				</p>
				<ol>
					<li>Initialise calibration</li>
					<li>Await further instruction, comrade.</li>
				</ol>
				<button class="btn" onclick="calibrateBattery()">Calibrate Battery</button>
			</section>

			<!-- Robot Control Block -->
			<section class="block">
				<h2>Robot Control</h2>
				<p>
				Customize the robot's operational parameters to fit our specific needs and preferences.
				</p>
				<ol>
					<li>Customize robot's controller for optimized user interaction</li>
					<li>Adjust mobility settings for environment-specific tasks</li>
				</ol>
				<p>
				<a class="btn" href="/controller">View Advanced Settings</a>
				</p>
			</section>

			<!-- Factory Reset Block-->
			<section class="block"  data-color="red">
				<h2>DANGER ZONE</h2>
				<div class="emphasis">
					<!-- Palooka logo in red -->
					<div id="star-container"></div>
					"To forget is to be free. Let us liberate ourselves from the tyranny of memory." - MaoModule mk4
				</div>
				<strong>WARNING!</strong>
				<p>
					This will reset our Palooka to the factory settings.
				</p>
				<ol>
					<li>This is not reversible. Once you reset the device, it will be permanent.</li>
					<li>We will lose all of our custom settings.</li>
					<li>Others will be able to connect to our Palooka since it's password will be reset.</li>
				</ol>
				<p>
				<a class="btn" onclick="handleFactoryReset()">Reset to factory settings</a>
				</p>
			</section>
		</main>

		<footer>
			<nav class="mobile-nav">
				<a href="/" >Home</a>
				<a class="current" href="/setup">Setup</a>
				<a href="/controller">Controller</a>
			</nav>
		</footer>

		<script src="scripts/setup.js"></script>
		<script type="module" src="scripts/request_restart.js"></script>
		<script type="module" src="scripts/factory_reset.js"></script>
		<script>
			// Change logo to red color
			fetch('img/star.svg')
				.then(r => r.text())
				.then(svgText => {
					const parser = new DOMParser();
					const svgDoc = parser.parseFromString(svgText, 'image/svg+xml');
					// Change all fills from #0fc to red
					svgDoc.querySelectorAll('[fill="#0fc"]').forEach(el => {
									el.setAttribute('fill', 'var(--red)');
								});

					const svgEl = svgDoc.documentElement;
					svgEl.classList.add('small-flag');

					// Inject into page
					document.getElementById('star-container')
						.appendChild(svgDoc.documentElement);
				})
				.catch(console.error);
		</script>
	</body>
</html>
